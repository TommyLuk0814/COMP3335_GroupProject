<!DOCTYPE html>
                        <html lang="en">
                        <head>
                            <meta charset="UTF-8">
                            <meta name="viewport" content="width=device-width, initial-scale=1.0">
                            <title>Login - Student Information Management System</title>
                            <style>
                                * {
                                    margin: 0;
                                    padding: 0;
                                    box-sizing: border-box;
                                }

                                body {
                                    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                                    background: #f5f5f5;
                                    min-height: 100vh;
                                    display: flex;
                                    justify-content: center;
                                    align-items: center;
                                    padding: 20px;
                                }

                                .login-container {
                                    background: white;
                                    border-radius: 10px;
                                    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
                                    padding: 40px;
                                    width: 100%;
                                    max-width: 450px;
                                }

                                h2 {
                                    text-align: center;
                                    color: #333;
                                    margin-bottom: 30px;
                                    font-size: 28px;
                                }

                                .form-group {
                                    margin-bottom: 20px;
                                }

                                label {
                                    display: block;
                                    margin-bottom: 8px;
                                    color: #555;
                                    font-weight: 500;
                                }

                                input, select {
                                    width: 100%;
                                    padding: 12px;
                                    border: 2px solid #ddd;
                                    border-radius: 5px;
                                    font-size: 14px;
                                    transition: border-color 0.3s;
                                }

                                input:focus, select:focus {
                                    outline: none;
                                    border-color: #4a90e2;
                                }

                                button {
                                    width: 100%;
                                    padding: 12px;
                                    background: #4a90e2;
                                    color: white;
                                    border: none;
                                    border-radius: 5px;
                                    font-size: 16px;
                                    font-weight: 600;
                                    cursor: pointer;
                                    transition: background 0.3s;
                                }

                                button:hover {
                                    background: #357abd;
                                }

                                button:active {
                                    background: #2868a8;
                                }

                                .error-message {
                                    color: #e74c3c;
                                    background: #fadbd8;
                                    padding: 10px;
                                    border-radius: 5px;
                                    margin-top: 15px;
                                    display: none;
                                    text-align: center;
                                }

                                .demo-accounts {
                                    margin-top: 30px;
                                    padding: 20px;
                                    background: #f8f9fa;
                                    border-radius: 5px;
                                    border-left: 4px solid #4a90e2;
                                }

                                .demo-accounts h3 {
                                    color: #333;
                                    font-size: 16px;
                                    margin-bottom: 12px;
                                }

                                .demo-accounts ul {
                                    list-style: none;
                                }

                                .demo-accounts li {
                                    padding: 8px 0;
                                    color: #555;
                                    font-size: 13px;
                                    border-bottom: 1px solid #e0e0e0;
                                }

                                .demo-accounts li:last-child {
                                    border-bottom: none;
                                }

                                .demo-accounts strong {
                                    color: #4a90e2;
                                    font-weight: 600;
                                }

                                .password-note {
                                    margin-top: 15px;
                                    padding: 12px;
                                    background: #fff3cd;
                                    border-left: 4px solid #ffc107;
                                    border-radius: 5px;
                                    color: #856404;
                                    font-size: 13px;
                                    text-align: center;
                                    font-weight: 500;
                                }
                            </style>
                        </head>
                        <body>
                            <div class="login-container">
                                <h2>Login</h2>
                                <form id="loginForm">
                                    <div class="form-group">
                                        <label for="email">Email:</label>
                                        <input type="email" id="email" name="email" required placeholder="Enter your email">
                                    </div>

                                    <div class="form-group">
                                        <label for="password">Password:</label>
                                        <input type="password" id="password" name="password" required placeholder="Enter your password">
                                    </div>

                                    <div class="form-group">
                                        <label for="role">Role:</label>
                                        <select id="role" name="role" required>
                                            <option value="">Please select identity</option>
                                            <option value="student">Student</option>
                                            <option value="guardian">Guardian</option>
                                            <option value="staff">Staff</option>
                                        </select>
                                    </div>

                                    <button type="submit">Login</button>
                                    <div class="error-message" id="errorMessage"></div>
                                </form>

                                <div class="demo-accounts">
                                    <h3>Demo Accounts:</h3>
                                    <ul>
                                        <li><strong>Student:</strong> sint.chiu@stu.edu.hk</li>
                                        <li><strong>Guardian:</strong> jason.yip@email.com</li>
                                        <li><strong>ARO:</strong> ashley.lee@staff.edu.hk</li>
                                        <li><strong>DRO:</strong> matthew.martin@staff.edu.hk</li>
                                    </ul>
                                    <div class="password-note">
                                        Password for all accounts: <strong>password123</strong>
                                    </div>
                                </div>
                            </div>

                            <script>
                                document.getElementById('loginForm').addEventListener('submit', async (e) => {
                                    e.preventDefault();

                                    const email = document.getElementById('email').value;
                                    const password = document.getElementById('password').value;
                                    const role = document.getElementById('role').value;
                                    const errorMessage = document.getElementById('errorMessage');

                                    try {
                                        const response = await fetch('/login', {
                                            method: 'POST',
                                            headers: {
                                                'Content-Type': 'application/json'
                                            },
                                            body: JSON.stringify({ email, password, role })
                                        });

                                        const data = await response.json();

                                        if (response.ok) {
                                            localStorage.setItem('access_token', data.access_token);
                                            localStorage.setItem('role', data.role);
                                            localStorage.setItem('user_id', data.user_id);
                                            localStorage.setItem('name', data.name);

                                            if (data.role === 'student') {
                                                window.location.href = '/student/profile.html';
                                            } else if (data.role === 'guardian') {
                                                window.location.href = '/Guardian/guardian_profile.html';
                                            } else if (data.role === 'ARO') {
                                                window.location.href = '/ARO/manage_grades.html';
                                            } else if (data.role === 'DRO') {
                                                window.location.href = '/DRO/manage_disciplinary.html';
                                            }
                                        } else {
                                            errorMessage.textContent = data.message || 'Login failed';
                                            errorMessage.style.display = 'block';
                                        }
                                    } catch (error) {
                                        errorMessage.textContent = 'Connection to server failed';
                                        errorMessage.style.display = 'block';
                                    }
                                });
                            </script>
                        </body>
                        </html>